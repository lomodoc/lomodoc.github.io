<!doctype html><html lang=zh dir=ltr><head><meta name=generator content="Hugo 0.78.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="在树莓派上安装Lomorage服务程序#要在树莓派上运行，您需要先购买一个树莓派，Lomorage可以运行在以下型号的机器上:
 Raspberry Pi 4 Model B Raspberry Pi 3 Model B+ Raspberry Pi Zero W Raspberry Pi 2 Model B  如果您还没有树莓派，我们建议购买新款的树莓派，会有更好的性能。下面是您需要的最小配置:
 树莓派主板 配套电源 16GB MicroSD卡  有3种方式来在Raspberry Pi上安装Lomorage服务程序, 一种是安装预编译好的系统镜像，该镜像已经安装了所有Lomorage服务程序依赖的库和第三方工具，简单快捷，推荐使用；如果您已经有树莓派在运行其他服务，您也可以使用Docker镜像来安装，或者使用从APT源安装。
安装系统镜像#预装的系统镜像包括所有的包:
  lomo-backend: Lomorage服务程序
  lomo-web: Lomorage网页程序
  lomo-base: 系统工具，包括网络配置，开关控制, 磁盘加载, 蓝牙控制台
  lomo-frame: 数码相框程序
  点击下面的链接下载系统镜像。
Raspberry Pi下载了系统镜像后, 你可以使用balenaEtcher将其安装到MicroSD卡, balenaEtcher提供Windows和macOS版本。"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Raspbian"><meta property="og:description" content="在树莓派上安装Lomorage服务程序#要在树莓派上运行，您需要先购买一个树莓派，Lomorage可以运行在以下型号的机器上:
 Raspberry Pi 4 Model B Raspberry Pi 3 Model B+ Raspberry Pi Zero W Raspberry Pi 2 Model B  如果您还没有树莓派，我们建议购买新款的树莓派，会有更好的性能。下面是您需要的最小配置:
 树莓派主板 配套电源 16GB MicroSD卡  有3种方式来在Raspberry Pi上安装Lomorage服务程序, 一种是安装预编译好的系统镜像，该镜像已经安装了所有Lomorage服务程序依赖的库和第三方工具，简单快捷，推荐使用；如果您已经有树莓派在运行其他服务，您也可以使用Docker镜像来安装，或者使用从APT源安装。
安装系统镜像#预装的系统镜像包括所有的包:
  lomo-backend: Lomorage服务程序
  lomo-web: Lomorage网页程序
  lomo-base: 系统工具，包括网络配置，开关控制, 磁盘加载, 蓝牙控制台
  lomo-frame: 数码相框程序
  点击下面的链接下载系统镜像。
Raspberry Pi下载了系统镜像后, 你可以使用balenaEtcher将其安装到MicroSD卡, balenaEtcher提供Windows和macOS版本。"><meta property="og:type" content="article"><meta property="og:url" content="https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-raspbian/"><meta property="article:modified_time" content="2021-08-25T09:15:16-07:00"><meta property="og:site_name" content="Lomorage文档"><title>Raspbian | Lomorage文档</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=alternate hreflang=en href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-raspbian/ title=Raspbian><link rel=stylesheet href=/book.min.44268c67a11d75c5d005aae92bc2c1514b11ff4ae89cacfb3fc009d4e3af0224.css integrity="sha256-RCaMZ6EddcXQBarpK8LBUUsR/0ronKz7P8AJ1OOvAiQ="><script defer src=/zh.search.min.904f40787f715c9117b2bf618aefcaf9251f3682d9ab3496d7eb55a9969301bc.js integrity="sha256-kE9AeH9xXJEXsr9hiu/K+SUfNoLZqzSW1+tVqZaTAbw="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-138235951-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/zh><span>Lomorage文档</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=https://docs.lomorage.com/zh/docs/Roadmap/>产品路线图</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/zh/docs/Highlight/>功能</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/zh/docs/Installation/>安装</a><ul><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/>Lomorage服务</a><ul><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-raspbian/ class=active>Raspbian</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-armbian/>Armbian</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-ubuntu/>Ubuntu</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-win/>Windows</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-osx/>OSX</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-service/installation-docker/>Docker</a></li></ul></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-client/>Lomorage客户端</a><ul><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-client/installation-ios/>iOS</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-client/installation-andriod/>Andriod</a></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-client/installation-web/>Web</a></li></ul></li><li><a href=https://docs.lomorage.com/zh/docs/Installation/lomo-frame/>Lomorage相框</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/zh/docs/Installation/external-access/>外网访问</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/zh/docs/Installation/lomorage-importer/>导入工具</a><ul></ul></li></ul></li></ul><ul><li><a href=https://github.com/lomorage/homepage target=_blank rel=noopener>Github</a></li><li><a href=https://lomorage.com target=_blank rel=noopener>主页</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Raspbian</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#在树莓派上安装lomorage服务程序>在树莓派上安装Lomorage服务程序</a><ul><li><a href=#安装系统镜像>安装系统镜像</a></li><li><a href=#docker安装>Docker安装</a></li><li><a href=#apt安装>APT安装</a><ul><li><a href=#1-添加lomoware源>1. 添加lomoware源</a></li><li><a href=#2-安装lomorage>2. 安装Lomorage</a></li><li><a href=#3-按需修改加载目录>3. 按需修改加载目录</a></li><li><a href=#4-运行>4. 运行</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=在树莓派上安装lomorage服务程序>在树莓派上安装Lomorage服务程序
<a class=anchor href=#%e5%9c%a8%e6%a0%91%e8%8e%93%e6%b4%be%e4%b8%8a%e5%ae%89%e8%a3%85lomorage%e6%9c%8d%e5%8a%a1%e7%a8%8b%e5%ba%8f>#</a></h1><p>要在树莓派上运行，您需要先购买一个
<a href=https://www.raspberrypi.org/>树莓派</a>，Lomorage可以运行在以下型号的机器上:</p><ul><li><a href=https://www.raspberrypi.org/products/raspberry-pi-4-model-b/>Raspberry Pi 4 Model B</a></li><li><a href=https://www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/>Raspberry Pi 3 Model B+</a></li><li><a href=https://www.raspberrypi.org/products/raspberry-pi-zero-w/>Raspberry Pi Zero W</a></li><li><a href=https://www.raspberrypi.org/products/raspberry-pi-2-model-b/>Raspberry Pi 2 Model B</a></li></ul><p>如果您还没有树莓派，我们建议购买新款的树莓派，会有更好的性能。下面是您需要的最小配置:</p><ul><li>树莓派主板</li><li>配套电源</li><li>16GB MicroSD卡</li></ul><p><strong>有3种方式来在Raspberry Pi上安装Lomorage服务程序</strong>, 一种是安装预编译好的系统镜像，该镜像已经安装了所有Lomorage服务程序依赖的库和第三方工具，简单快捷，推荐使用；如果您已经有树莓派在运行其他服务，您也可以使用Docker镜像来安装，或者使用从APT源安装。</p><h2 id=安装系统镜像>安装系统镜像
<a class=anchor href=#%e5%ae%89%e8%a3%85%e7%b3%bb%e7%bb%9f%e9%95%9c%e5%83%8f>#</a></h2><p>预装的系统镜像包括所有的包:</p><ul><li><p>lomo-backend: Lomorage服务程序</p></li><li><p>lomo-web: Lomorage网页程序</p></li><li><p>lomo-base: 系统工具，包括网络配置，开关控制, 磁盘加载, 蓝牙控制台</p></li><li><p>lomo-frame: 数码相框程序</p></li></ul><p>点击下面的链接下载系统镜像。</p><p align=center><a href=https://github.com/lomorage/pi-gen/releases/download/2021_08_07.14_44_50.0.531d560/image_2021-08-07-lomorage-lite.zip title="Install Lomorage for Raspberry Pi" class="badge raspberrypi">Raspberry Pi</a></p><p>下载了系统镜像后, 你可以使用
<a href=https://www.balena.io/etcher/>balenaEtcher</a>将其安装到MicroSD卡, balenaEtcher提供Windows和macOS版本。</p><p>将MicroSD卡插入到台式电脑或笔记本的读卡器后，选择下载的系统镜像，选择MicroSD卡，点击“Flash“按钮，几分钟后就会安装完成。</p><div align=center><p class=screenshoot><img width=50% src=/img/installation/balenaEtcher.png></p></div><p>安装完后，将MicroSD卡插入到树莓派，接上USB移动硬盘，插入网线，接通电源，等待几分钟系统启动。</p><p>如果您连接了HDMI，系统启动完成后，会提示没有找到资源，也会显示一个二维码用来绑定Lomorage相框，<strong>请先在iOS/Android手机应用上创建用户，然后再扫码绑定Lomorage相框</strong>，您可以使用Lomorage手机应用程序上传照片，然后按"r"键重新扫描。如果您想退出到控制台做一些系统配置，可以按"ESC"退出，然后按"Ctrl+Alt+F2"切换到控制台，配置完成后，可以使用命令<code>sudo service supervisor restart</code>来启动Lomorage相框程序。</p><p><em>默认的用户名是"lomoware"，密码是"lomorage"</em></p><p>为了更好的性能，建议使用有线网络连接，但如果您想使用WiFi, 您可以登陆树莓派，并使用下面的命令来启用无线连接<code>wifi_switch.sh client wifi-ssid wifi-password</code>，将 &ldquo;wifi-ssid"和"wifi-password"替换为您的无线网络名和密码。<em>如果您的无线网络名称中有中文字符或者空格，就需要用引号，比如<code>wifi_switch.sh client "Lomorage的 无线" mypassword</code></em></p><blockquote class="book-hint warning"><p>您有可能会碰到"Wi-Fi is currently blocked by rfkill"的问题，可以执行下面的命令检查一下WiFi是否被禁用:</p><pre><code>pi@raspberrypi:~ $ sudo rfkill list all
0: phy0: Wireless LAN
	Soft blocked: no
	Hard blocked: no
1: hci0: Bluetooth
	Soft blocked: yes
	Hard blocked: no
</code></pre><p>您可以使用下面的命令来启用WiFi:</p><pre><code>sudo rfkill unblock 0
</code></pre><p>这里“0”是上面Wireless LAN的序号。</p><p>启用之后您可以再尝试<code>wifi_switch.sh</code>。</p></blockquote><h2 id=docker安装>Docker安装
<a class=anchor href=#docker%e5%ae%89%e8%a3%85>#</a></h2><p>请参考
<a href=https://github.com/lomorage/lomo-docker>lomo-docker</a>安装Docker镜像。请使用arm的镜像"lomorage/raspberrypi-lomorage:latest&rdquo;。</p><h2 id=apt安装>APT安装
<a class=anchor href=#apt%e5%ae%89%e8%a3%85>#</a></h2><p>如果您运行官方的系统，APT是最快捷的安装方式。</p><h3 id=1-添加lomoware源>1. 添加lomoware源
<a class=anchor href=#1-%e6%b7%bb%e5%8a%a0lomoware%e6%ba%90>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt install -y ca-certificates python-certifi python3-certifi
sudo update-ca-certificates --fresh
wget -qO - https://lomoware.lomorage.com/debian/gpg.key | sudo apt-key add -
</code></pre></div><p>如果您使用 jessie:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;deb https://lomoware.lomorage.com/debian/jessie jessie main&#34;</span> | sudo tee /etc/apt/sources.list.d/lomoware.list
</code></pre></div><p>如果您使用buster:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;deb https://lomoware.lomorage.com/debian/buster buster main&#34;</span> | sudo tee /etc/apt/sources.list.d/lomoware.list
</code></pre></div><p>然后运行:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt update
</code></pre></div><h3 id=2-安装lomorage>2. 安装Lomorage
<a class=anchor href=#2-%e5%ae%89%e8%a3%85lomorage>#</a></h3><p>最小安装需要lomo-vips和lomo-backend，您可以根据自己需要进行选择。</p><ul><li><p>lomo-backend: 必须, Lomorage服务程序</p></li><li><p>lomo-web: 可选, Lomorage网页程序</p></li><li><p>lomo-base: 可选, 系统工具，包括网络配置，开关控制, 磁盘加载, 蓝牙控制台</p></li><li><p>lomo-vips: 必须, lomo-backend使用的图像处理库</p></li><li><p>lomo-frame: 可选, 数码相框程序</p></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt install lomo-base lomo-vips lomo-backend lomo-web lomo-frame -y
</code></pre></div><h3 id=3-按需修改加载目录>3. 按需修改加载目录
<a class=anchor href=#3-%e6%8c%89%e9%9c%80%e4%bf%ae%e6%94%b9%e5%8a%a0%e8%bd%bd%e7%9b%ae%e5%bd%95>#</a></h3><p>如果您不是使用步骤4的usbmount来自动加载磁盘（没有加载到"/media"路径下的子目录），您需要添加Lomorage服务程序运行参数来指定加载目录。</p><p>比如如果您使用PCManFM，那么加载的路径会是"/media/pi"。 要指定加载目录"/media/pi", 修改"/lib/systemd/system/lomod.service"的<code>ExecStart</code>字段，加上 &ldquo;&ndash;mount-dir"参数:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ExecStart<span style=color:#f92672>=</span>/opt/lomorage/bin/lomod -b /opt/lomorage/var --mount-dir /media/pi  --max-upload <span style=color:#ae81ff>1</span> --max-fetch-preview <span style=color:#ae81ff>3</span>
</code></pre></div><p><strong>请确保您的用户有上面设置的"mount-dir"的读写权限, 另外改参数必须是mount的父目录，比如mount到&rdquo;/media/pi/disk0"下面，就必须指定为"/media/pi"</strong></p><h3 id=4-运行>4. 运行
<a class=anchor href=#4-%e8%bf%90%e8%a1%8c>#</a></h3><p>重启Lomorage服务程序:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 重启lomo-backend</span>
sudo systemctl restart lomod

<span style=color:#75715e># 重启lomo-web</span>
sudo systemctl restart lomow

<span style=color:#75715e># 重启lomo-frame</span>
sudo service supervisor restart
</code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
中文</li></ul><ul class=book-languages-list><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-raspbian/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li class=active><a href=https://docs.lomorage.com/zh/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
中文</a></li></ul></div><div><a class="flex align-center" href=https://github.com/lomodoc/homepage/commit/5e0fa37422601c691fabf239621ca050be775b97 title="最后修改者 Jiantao Fu | August 25, 2021" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 25, 2021</span></a></div><div><a class="flex align-center" href=https://github.com/lomodoc/homepage/edit/main/content.zh/docs/Installation/lomorage-service/installation-raspbian.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>编辑本页</span></a></div></div></footer><div class=book-comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"lomorage"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#在树莓派上安装lomorage服务程序>在树莓派上安装Lomorage服务程序</a><ul><li><a href=#安装系统镜像>安装系统镜像</a></li><li><a href=#docker安装>Docker安装</a></li><li><a href=#apt安装>APT安装</a><ul><li><a href=#1-添加lomoware源>1. 添加lomoware源</a></li><li><a href=#2-安装lomorage>2. 安装Lomorage</a></li><li><a href=#3-按需修改加载目录>3. 按需修改加载目录</a></li><li><a href=#4-运行>4. 运行</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>