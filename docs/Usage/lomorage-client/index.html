<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.78.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lomorage Command Line Client#Lomorage command line client is a tool to allow user to control backend directly. Its name is lomoc and installed under /opt/lomorage/bin. It provides some options to configure the backend.
Reset user&rsquo;s backup home directory and backup directory#After one user is created through mobile application, people can use lomoc command line option to reset home directory and backup directory. Firstly, people need copy specific user&rsquo;s or all users' asset directories to the new directory."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Lomorage Command Line Client"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://docs.lomorage.com/docs/Usage/lomorage-client/"><title>Lomorage Command Line Client | Lomorage Documentation</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=alternate hreflang=zh href=https://docs.lomorage.com/zh/docs/Usage/lomorage-client/ title=命令行工具><link rel=stylesheet href=/book.min.d805fe2ebdefe4129affdf99919216bbf7f9e3d6ed05e1b743c4e4266ceb6543.css integrity="sha256-2AX+Lr3v5BKa/9+ZkZIWu/f549btBeG3Q8TkJmzrZUM="><script defer src=/en.search.min.a7cc636263c7d0a32ce3283e57f699762740300aa90e62ef9ed0bd7a900dd1ea.js integrity="sha256-p8xjYmPH0KMs4yg+V/aZdidAMAqpDmLvntC9epAN0eo="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-138235951-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=alternate type=application/rss+xml href=https://docs.lomorage.com/docs/Usage/lomorage-client/index.xml title="Lomorage Documentation"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/><span>Lomorage Documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Highlight/>Highlight</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Installation/>Installation</a><ul><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/>Lomorage Photo Assistant</a><ul><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-raspbian/>Raspbian</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-armbian/>Armbian</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-ubuntu/>Ubuntu</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-win/>Windows</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-osx/>OSX</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-docker/>Docker</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-openwrt/>Openwrt</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-synology/>Synology</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-unraid/>Unraid</a></li></ul></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/>Lomorage Client</a><ul><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/installation-ios/>iOS</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/installation-android/>Android</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/installation-web/>Web</a></li></ul></li><li><a href=https://docs.lomorage.com/docs/Installation/lomo-frame/>Lomorage Frame</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Installation/lomorage-importer/>Import Tool</a><ul></ul></li></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Usage/>Usage</a><ul><li><a href=https://docs.lomorage.com/docs/Usage/lomorage-client/ class=active>Lomorage Command Line Client</a><ul></ul></li><li><a href=https://docs.lomorage.com/docs/Usage/external-access/>External Access</a><ul></ul></li><li><a href=https://docs.lomorage.com/docs/Usage/customized-view/>Customized View</a><ul></ul></li></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Roadmap/>Roadmap</a><ul></ul></li></ul><ul><li><a href=https://github.com/lomorage/homepage target=_blank rel=noopener>Github</a></li><li><a href=https://lomorage.com target=_blank rel=noopener>Homepage</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Lomorage Command Line Client</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#lomorage-command-line-client>Lomorage Command Line Client</a><ul><li><a href=#reset-users-backup-home-directory-and-backup-directory>Reset user&rsquo;s backup home directory and backup directory</a></li><li><a href=#import-from-one-existing-folders>Import from one existing folders</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=lomorage-command-line-client>Lomorage Command Line Client
<a class=anchor href=#lomorage-command-line-client>#</a></h1><p>Lomorage command line client is a tool to allow user to control backend directly. Its name is <code>lomoc</code> and installed under /opt/lomorage/bin. It provides some options to configure the backend.</p><h2 id=reset-users-backup-home-directory-and-backup-directory>Reset user&rsquo;s backup home directory and backup directory
<a class=anchor href=#reset-users-backup-home-directory-and-backup-directory>#</a></h2><p>After one user is created through mobile application, people can use <code>lomoc</code> command line option to reset home directory and backup directory. Firstly, people need copy specific user&rsquo;s or all users' asset directories to the new directory. For example, if new media directory is <code>/media/newdisk</code>, and there are 2 users <code>alice</code> and <code>bob</code>, the new tree would be like</p><pre><code>/media/newdisk/
|-- alice
|   `-- Photos
|       |-- master
|       |   |-- 2003
|       |   |   |-- 01
|       |   |   |   `-- 17
|       |   |   |       `-- 20030117_4.jpg
|       |   |   `-- 11
|       |   |       |-- 01
|       |   |       |   |-- 20031101_2.jpg
|       |   |       |   `-- 20031101_3.jpg
|       |   |       `-- 23
|       |   |           |-- 20031123_1.jpg
|       |   |           |-- 20031123_11.webp
|       |   |           |-- 20031123_12.dng
|       |   |           `-- 20031123_13.heic
|       |   |-- 2004
|       |   |   `-- 01
|       |   |       `-- 21
|       |   |           `-- 20040121_5.jpg
|       |   `-- 2013
|       |       |-- 07
|       |       |   `-- 28
|       |       |       `-- 20130728_7.png
`-- bob
    `-- Photos
        |-- master
        |   `-- 2013
        |       |-- 08
        |       |   `-- 08
        |       |       `-- 20130808_6.mp4
        |       `-- 11
        |           `-- 23
        |               |-- 20131123_10.zip
        |               |-- 20131123_10_image.heic
        |               |-- 20131123_8.zip
        |               |-- 20131123_8_image.jpg
        |               `-- 20131123_9.heic
</code></pre><p>Note:</p><ul><li>If <code>[user name]</code> is supplied, it only updates the given user&rsquo;s home directory or backup directory; otherwise, it will replace all users' home directory or backup directory to the new given media directory.</li><li>By default, the client will read data from /opt/lomorage/var/assets.db. If you installed the lomod to different directory, you can use <code>--db</code> option to supply new DB file location</li></ul><pre><code>$ /opt/lomorage/bin/lomoc reset home-dir -h
NAME:
   lomoc reset home-dir - reset users' home directory in DB, and input dir must be media dir. If username is not specified, it will reset all users' home directory

USAGE:
   lomoc reset home-dir [command options] [new media dir] ([user name])

OPTIONS:
   --db value  db filename with full path (default: &quot;/opt/lomorage/var/assets.db&quot;)

$ /opt/lomorage/bin/lomoc reset backup-dir -h
NAME:
   lomoc reset backup-dir - reset users' backup directory in DB, and input dir must be media backup dir. If username is not specified, it will reset all users' backup directory

USAGE:
   lomoc reset backup-dir [command options] [new backup dir] ([user name])

OPTIONS:
   --db value  db filename with full path (default: &quot;/opt/lomorage/var/assets.db&quot;)

</code></pre><h2 id=import-from-one-existing-folders>Import from one existing folders
<a class=anchor href=#import-from-one-existing-folders>#</a></h2><p>Command line tool is for advanced user when the existing assets are in attached USB or Local/NFS/CIFS mounted disks along with &ldquo;Lomorage Photo Assistant&rdquo;. It can avoid unnecessary back-and-forth network traffic as well as disk operation. During import, the tool will move existing assets to the directories created by lomorage for each user, or not move asset while inserting record only if supply <code>--no-move</code> option. All import logs are saved under /opt/lomorage/var/log/import_[import directory].log. Below is usage for the tool.</p><p><strong>Should be notice that the import will creates albums automatically according to the directories structures</strong></p><pre><code>$ /opt/lomorage/bin/lomoc import -h
NAME:
   lomoc import - Import all photos from given directory into lomo backend with given username and password

USAGE:
   lomoc import [command options] [username] [password] [directory]

OPTIONS:
   --port value, -p value  (default: 8000)
   --no-move, -n           not moving original photos/videos, and only insert record in db
   --no-video, --nv        not scan video files. This is to speed up the first import process
</code></pre><p>Note:</p><ul><li><code>--port</code> is listen port of <code>lomod</code> backend service. It is 8000 by default.</li><li><code>--no-move</code> is to hint backend service not moving assets, and only insert record in DB. By default it is false, and import will <strong>MOVE</strong> all assets and consolidate them into one location</li><li><code>--no-video</code> is to hint backend service not scanning video files. This is to speed up the first import process. Since backend always check assets exists or not by their SHA, you can safely import video at the 2nd time.</li></ul><p>Example:</p><pre><code>$ /opt/lomorage/bin/lomoc import alice password /media/STEC_838C-1111/test/video
-m
Login localhost successfully
import photos/videos from /media/STEC_838C-1111/test
please check import log /opt/lomorage/var/log/import_media_STEC_838C-1111_test.log

$ cat /opt/lomorage/var/log/import_media_STEC_838C-1111_test.log
start import /media/STEC_838C-1111/test/img/11_2014_01_21.webp
finish import /media/STEC_838C-1111/test/img/11_2014_01_21.webp to /media/STEC_838C-1111/alice/Photos/master/2021/09/20/20210920_9391.webp
start import /media/STEC_838C-1111/test/img/12_2014_01_21.heic
finish import /media/STEC_838C-1111/test/img/12_2014_01_21.heic to /media/STEC_838C-1111/alice/Photos/master/2021/09/20/20210920_9392.heic
start import /media/STEC_838C-1111/test/img/14_2017_09_13.heic
finish import /media/STEC_838C-1111/test/img/14_2017_09_13.heic to /media/STEC_838C-1111/alice/Photos/master/2017/09/13/20170913_9393.heic
start import /media/STEC_838C-1111/test/img/1_2003_01_17.jpg
finish import /media/STEC_838C-1111/test/img/1_2003_01_17.jpg to /media/STEC_838C-1111/alice/Photos/master/2003/01/17/20030117_9394.jpg
start import /media/STEC_838C-1111/test/img/3_2003_11_01.jpg
finish import /media/STEC_838C-1111/test/img/3_2003_11_01.jpg to /media/STEC_838C-1111/alice/Photos/master/2003/11/01/20031101_9395.jpg
start import /media/STEC_838C-1111/test/img/4_2003_11_01.jpg
finish import /media/STEC_838C-1111/test/img/4_2003_11_01.jpg to /media/STEC_838C-1111/alice/Photos/master/2003/11/01/20031101_9396.jpg
start import /media/STEC_838C-1111/test/img/5_2003_11_23.jpg
finish import /media/STEC_838C-1111/test/img/5_2003_11_23.jpg to /media/STEC_838C-1111/alice/Photos/master/2003/11/23/20031123_9397.jpg
start import /media/STEC_838C-1111/test/img/6_2004_01_21.jpg
finish import /media/STEC_838C-1111/test/img/6_2004_01_21.jpg to /media/STEC_838C-1111/alice/Photos/master/2004/01/21/20040121_9398.jpg
start import /media/STEC_838C-1111/test/img/7_2004_09_12.webp
finish import /media/STEC_838C-1111/test/img/7_2004_09_12.webp to /media/STEC_838C-1111/alice/Photos/master/2004/09/12/20040912_9399.webp
start import /media/STEC_838C-1111/test/img/8_2008_12_14.dng
finish import /media/STEC_838C-1111/test/img/8_2008_12_14.dng to /media/STEC_838C-1111/alice/Photos/master/2008/12/14/20081214_9400.dng
start import /media/STEC_838C-1111/test/img/9_2013_07_28.png
finish import /media/STEC_838C-1111/test/img/9_2013_07_28.png to /media/STEC_838C-1111/alice/Photos/master/2021/09/20/20210920_9401.png
start import /media/STEC_838C-1111/test/img/preview.jpg
finish import /media/STEC_838C-1111/test/img/preview.jpg to /media/STEC_838C-1111/alice/Photos/master/2003/11/23/20031123_9402.jpg
FINISH: totally scanned 1 directories, and imported 12 media files
</code></pre></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=https://docs.lomorage.com/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=https://docs.lomorage.com/zh/docs/Usage/lomorage-client/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
中文</a></li></ul></div><div><a class="flex align-center" href=https://github.com/lomodoc/homepage/commit/6802f93ad1ad9bbd6ea8bf9698f1d14f1c616bc4 title="Last modified by Dweb Fan | October 1, 2022" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>October 1, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/lomodoc/homepage/edit/main/content/docs/Usage/lomorage-client/_index.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"lomorage"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#lomorage-command-line-client>Lomorage Command Line Client</a><ul><li><a href=#reset-users-backup-home-directory-and-backup-directory>Reset user&rsquo;s backup home directory and backup directory</a></li><li><a href=#import-from-one-existing-folders>Import from one existing folders</a></li></ul></li></ul></nav></div></aside></main></body></html>