<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.78.1"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="External Access Configuration#Currently, external access need some manual setup and some technical background, we will make the process more user-friendly later. There are mainly 2 options:
 Use the 3rd party tunnel service Open port mapping on your router  Use the 3rd party tunnel service (option 1)#There are a few tunnel services available for free use, most tunnel services require a client application running on your device, and set up a connection to the service running by the service provider, and it will give a subdomain name for you to use, if you access the URL with that subdomain, the tunnel service will forward the traffic/request to the client application."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="External Access"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://docs.lomorage.com/docs/Usage/external-access/"><title>External Access | Lomorage Documentation</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=alternate hreflang=zh href=https://docs.lomorage.com/zh/docs/Usage/external-access/ title=外网访问><link rel=stylesheet href=/book.min.d805fe2ebdefe4129affdf99919216bbf7f9e3d6ed05e1b743c4e4266ceb6543.css integrity="sha256-2AX+Lr3v5BKa/9+ZkZIWu/f549btBeG3Q8TkJmzrZUM="><script defer src=/en.search.min.df5fbf4f7be9bd7dd3595d57d605210833b0f20f60cab847c29271b1961cbdfa.js integrity="sha256-31+/T3vpvX3TWV1X1gUhCDOw8g9gyrhHwpJxsZYcvfo="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-138235951-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=alternate type=application/rss+xml href=https://docs.lomorage.com/docs/Usage/external-access/index.xml title="Lomorage Documentation"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/><span>Lomorage Documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Highlight/>Highlight</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Installation/>Installation</a><ul><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/>Lomorage Photo Assistant</a><ul><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-raspbian/>Raspbian</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-armbian/>Armbian</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-ubuntu/>Ubuntu</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-win/>Windows</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-osx/>OSX</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-docker/>Docker</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-openwrt/>Openwrt</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-synology/>Synology</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-service/installation-unraid/>Unraid</a></li></ul></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/>Lomorage Client</a><ul><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/installation-ios/>iOS</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/installation-android/>Android</a></li><li><a href=https://docs.lomorage.com/docs/Installation/lomorage-client/installation-web/>Web</a></li></ul></li><li><a href=https://docs.lomorage.com/docs/Installation/lomo-frame/>Lomorage Frame</a><ul></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Installation/lomorage-importer/>Import Tool</a><ul></ul></li></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Usage/>Usage</a><ul><li><a href=https://docs.lomorage.com/docs/Usage/lomorage-client/>Lomorage Command Line Client</a><ul></ul></li><li><a href=https://docs.lomorage.com/docs/Usage/external-access/ class=active>External Access</a><ul></ul></li><li><a href=https://docs.lomorage.com/docs/Usage/customized-view/>Customized View</a><ul></ul></li></ul></li><li class=book-section-flat><a href=https://docs.lomorage.com/docs/Roadmap/>Roadmap</a><ul></ul></li></ul><ul><li><a href=https://github.com/lomorage/homepage target=_blank rel=noopener>Github</a></li><li><a href=https://lomorage.com target=_blank rel=noopener>Homepage</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>External Access</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#external-access-configuration>External Access Configuration</a><ul><li><a href=#use-the-3rd-party-tunnel-service-option-1>Use the 3rd party tunnel service (option 1)</a><ul><li><a href=#1-register>1. Register</a></li><li><a href=#2-download>2. Download</a></li><li><a href=#3-installation>3. Installation</a></li><li><a href=#4-connect-your-account>4. Connect your account</a></li><li><a href=#5-run-ngrok>5. Run ngrok</a></li><li><a href=#6-config-tunnel-service-on-lomorage-app>6. Config tunnel service on Lomorage APP</a></li></ul></li><li><a href=#nginx-https-proxy-option-2>Nginx https proxy (option 2)</a><ul><li><a href=#nginx-proxy-manager>Nginx Proxy Manager</a></li><li><a href=#customize-nginx-configuration>Customize Nginx Configuration</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=external-access-configuration>External Access Configuration
<a class=anchor href=#external-access-configuration>#</a></h1><p>Currently, external access need some manual setup and some technical background, we will make the process more user-friendly later. There are mainly 2 options:</p><ol><li>Use the 3rd party tunnel service</li><li>Open port mapping on your router</li></ol><h2 id=use-the-3rd-party-tunnel-service-option-1>Use the 3rd party tunnel service (option 1)
<a class=anchor href=#use-the-3rd-party-tunnel-service-option-1>#</a></h2><p>There are a few tunnel services available for free use, most tunnel services require a client application running on your device, and set up a connection to the service running by the service provider, and it will give a subdomain name for you to use, if you access the URL with that subdomain, the tunnel service will forward the traffic/request to the client application.</p><p><a href=https://ngrok.com>ngrok</a> is a free and popular tunnel services, requires registration before use, and need pay for customize subdomain. You can also use other tunnel services as well.</p><h3 id=1-register>1. Register
<a class=anchor href=#1-register>#</a></h3><p>Sign up a ngrok account
<a href=https://dashboard.ngrok.com/signup>here</a>, after that, it will show up a &ldquo;Setup & Installation&rdquo; page.</p><h3 id=2-download>2. Download
<a class=anchor href=#2-download>#</a></h3><p>ngrok is just one binary, you can download the version on your platform.</p><p>If you are on Raspberry Pi, you can copy the link of Linux(ARM) on the &ldquo;Setup & Installation&rdquo; page, which is &ldquo;<a href=https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-arm.zip%22>https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-arm.zip"</a> for now, and download it via &ldquo;wget&rdquo;.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-arm.zip
</code></pre></div><h3 id=3-installation>3. Installation
<a class=anchor href=#3-installation>#</a></h3><p>unzip and get the binary. You can double click on Windows or macOS to unzip it.</p><p>If you are using Raspberry Pi, use &ldquo;unzip&rdquo; command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>unzip ngrok-stable-linux-arm.zip
</code></pre></div><h3 id=4-connect-your-account>4. Connect your account
<a class=anchor href=#4-connect-your-account>#</a></h3><p>On the &ldquo;Setup & Installation&rdquo; page step 3, it shows the “authtoken”, you need open <strong>terminal</strong> to run ngrok to add the authtoken to the config file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./ngrok authtoken <span style=color:#f92672>[</span>your-authtoken-show-in-step-3<span style=color:#f92672>]</span>
</code></pre></div><h3 id=5-run-ngrok>5. Run ngrok
<a class=anchor href=#5-run-ngrok>#</a></h3><p>&ldquo;Lomorage Photo Assistant&rdquo; is using &ldquo;8000&rdquo; by default, and ngrok can&rsquo;t customize subdomain with free account. After runnig successfully, it will show the tunnel url, the subdomain is a random string which might change in next run.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./ngrok http <span style=color:#ae81ff>8000</span>
</code></pre></div><script id=asciicast-265359 src=https://asciinema.org/a/265359.js async></script><h3 id=6-config-tunnel-service-on-lomorage-app>6. Config tunnel service on Lomorage APP
<a class=anchor href=#6-config-tunnel-service-on-lomorage-app>#</a></h3><p>Open Lomorage APP on the phone, and in the settings tab, fill the tunnel service host, the host is like &ldquo;2e30eea5.ngrok.io&rdquo;, and port should be &ldquo;443&rdquo;.</p><h2 id=nginx-https-proxy-option-2>Nginx https proxy (option 2)
<a class=anchor href=#nginx-https-proxy-option-2>#</a></h2><p>Another option is to open port mapping on your home router and use nginx as reverse https proxy if you have your own domain name. Depends on your familiarity on Nginx, you can either use popular Nginx Proxy Manager tool, or customized nginx configuration by yourselves. Following sections presents both options for you to choose.</p><blockquote class="book-hint info">If you are using Lomorage image, the login username is &ldquo;lomoware&rdquo; and password is &ldquo;lomorage&rdquo;;</blockquote><h3 id=nginx-proxy-manager>Nginx Proxy Manager
<a class=anchor href=#nginx-proxy-manager>#</a></h3><p>Nginx Proxy Manager is a populer self-host tool to easily forward your websites running at home to the public internet. Please refer
<a href=https://nginxproxymanager.com>user guide</a> for installation.</p><ol><li>Click <code>Add Proxy Host</code>, then set your own domain name and forward ip as below screen. Schema is <code>http</code>, and forward port is the listen port configured for lomorage container, 8000 is default listen por
t.</li></ol><p align=center><img width=50% src=/img/installation/npm1.png></p><ol start=2><li>Enable <code>SSL</code> configuration and set certificate domain name as your own domain name</li></ol><p align=center><img width=50% src=/img/installation/npm2.png></p><ol start=3><li>Click <code>Save</code>, and below host should be added into the host list</li></ol><p align=center><img width=50% src=/img/installation/npm3.png></p><h3 id=customize-nginx-configuration>Customize Nginx Configuration
<a class=anchor href=#customize-nginx-configuration>#</a></h3><p>The following part will use setup in Linux as an example, other platforms are similar since all the software used below are cross platform.</p><h4 id=1-install-certbot-and-nginx>1. Install certbot and Nginx
<a class=anchor href=#1-install-certbot-and-nginx>#</a></h4><pre><code>$ sudo apt-get install certbot python-certbot-nginx -y
</code></pre><h4 id=2-generate-certificate>2. generate certificate
<a class=anchor href=#2-generate-certificate>#</a></h4><p><strong>First, make sure you have your domain name configured and opened TCP port mapping 80 and 443 on your home router, and forward those traffic to the device running Nginx on the same port.</strong></p><p><strong>Following part will use &ldquo;bob.lomorage.com&rdquo; as an example</strong></p><pre><code>$ sudo certbot --nginx -d bob.lomorage.com
</code></pre><p>And this will generate certificate as below:</p><pre><code>$ sudo certbot --nginx -d bob.lomorage.com
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Requesting a certificate for bob.lomorage.com

Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/bob.lomorage.com/fullchain.pem
Key is saved at:         /etc/letsencrypt/live/bob.lomorage.com/privkey.pem
This certificate expires on 2021-11-14.
These files will be updated when the certificate renews.
Certbot has set up a scheduled task to automatically renew this certificate in the background.
</code></pre><h4 id=3-config-nginx>3. config Nginx
<a class=anchor href=#3-config-nginx>#</a></h4><p>create “/etc/nginx/conf.d/lomorage.conf” (need sudo), and fill with content below (change &ldquo;bob.lomorage.com&rdquo; with your own domain name):</p><pre><code>server {
    listen 443 ssl;
    listen [::]:443 ssl;
    server_name demo.lomorage.com;

    ssl on;
    ssl_certificate /etc/letsencrypt/live/bob.lomorage.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/bob.lomorage.com/privkey.pem;

    location / {
        client_max_body_size 0;
        proxy_pass http://localhost:8000;
        proxy_set_header X-Forwarded-For $remote_addr;
    }
}
</code></pre><p>If your &ldquo;Lomorage Photo Assistant&rdquo; and nginx are running on different devices, change &ldquo;localhost&rdquo; to the IP address running Lomorage service.</p><p>Now reload config, restart and enable Nginx service</p><pre><code>sudo systemctl restart nginx
sudo systemctl enable nginx
</code></pre><p>Now you can verify the settings using browser by accessing &ldquo;<a href=https://bob.lomorage.com/system%22>https://bob.lomorage.com/system"</a> (change &ldquo;bob.lomorage.com&rdquo; with your own domain name).</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div class=book-languages tabindex=0 aria-haspopup=true><ul><li class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</li></ul><ul class=book-languages-list><li class=active><a href=https://docs.lomorage.com/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
English</a></li><li><a href=https://docs.lomorage.com/zh/docs/Usage/external-access/ class="flex align-center"><img src=/svg/translate.svg class=book-icon alt=Languages>
中文</a></li></ul></div><div><a class="flex align-center" href=https://github.com/lomodoc/homepage/commit/07aef3b73ea737f119fa64caceba1bc36a75d7eb title="Last modified by Jiantao Fu | April 7, 2022" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 7, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/lomodoc/homepage/edit/main/content/docs/Usage/external-access/_index.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"lomorage"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#external-access-configuration>External Access Configuration</a><ul><li><a href=#use-the-3rd-party-tunnel-service-option-1>Use the 3rd party tunnel service (option 1)</a><ul><li><a href=#1-register>1. Register</a></li><li><a href=#2-download>2. Download</a></li><li><a href=#3-installation>3. Installation</a></li><li><a href=#4-connect-your-account>4. Connect your account</a></li><li><a href=#5-run-ngrok>5. Run ngrok</a></li><li><a href=#6-config-tunnel-service-on-lomorage-app>6. Config tunnel service on Lomorage APP</a></li></ul></li><li><a href=#nginx-https-proxy-option-2>Nginx https proxy (option 2)</a><ul><li><a href=#nginx-proxy-manager>Nginx Proxy Manager</a></li><li><a href=#customize-nginx-configuration>Customize Nginx Configuration</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>